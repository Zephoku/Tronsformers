<html>
  <head>
    <script type="text/javascript">ENGINE = {};</script>

    <script type="text/javascript" src="lib/gl-matrix-min.js"></script>
    <script type="text/javascript" src="Engine/object.js"></script>
    <script type="text/javascript" src="Engine/face.js"></script>
    <script type="text/javascript" src="Engine/renderer.js"></script>
    <script type="text/javascript" src="Engine/camera.js"></script>
    <script type="text/javascript" src="Engine/shaders.js"></script>
    <script type="text/javascript" src="Engine/geometry.js"></script>
    <script type="text/javascript" src="Engine/scene.js"></script>
    <script type="text/javascript" src="Engine/light.js"></script>

    
  </head>
  <body>
    HIIIIIIIIII =)
    <canvas id="glCanvas" style="border: none;" width="500" height="500"></canvas>
    <input type=button onclick='renderer.render( scene, camera );' value="Render"/>
    <img src="flower.jpg" />
  </body>

  <script type="text/javascript">
      var canvasDOM = document.getElementById('glCanvas');
      var renderer = new ENGINE.Renderer({'canvas': canvasDOM});
      var scene = new ENGINE.Scene();
      var camera = new ENGINE.Camera();
      var o = new ENGINE.Object3D();
      var light = new ENGINE.Light();

      light.position = vec3.fromValues( 2.0, 0.0, 0.0 );

      scene.lights.push( light );

      renderer.initGL();

      var g = new ENGINE.Geometry();

//pyramid geometry
      var index = 0;
      index = g.vertices.push( vec3.fromValues( 0.0, 0.0, 1.0 ) );
      index = g.vertices.push( vec3.fromValues( -1.0, 0.0, -1.0 ) );
      index = g.vertices.push( vec3.fromValues( 1.0, 0.0, -1.0 ) );
      g.faces.push( new ENGINE.Face( index-3, index-2, index-1 ) );

      index = g.vertices.push( vec3.fromValues( 0.0, 0.0, 1.0 ) );
      index = g.vertices.push( vec3.fromValues( -1.0, 0.0, -1.0 ) );
      index = g.vertices.push( vec3.fromValues( 0.0, 1.0, 0.0 ) );
      g.faces.push( new ENGINE.Face( index-3, index-2, index-1 ) );

      index = g.vertices.push( vec3.fromValues( 0.0, 0.0, 1.0 ) );
      index = g.vertices.push( vec3.fromValues( 0.0, 1.0, 0.0 ) );
      index = g.vertices.push( vec3.fromValues( 1.0, 0.0, -1.0 ) );
      g.faces.push( new ENGINE.Face( index-3, index-2, index-1 ) );

      index = g.vertices.push( vec3.fromValues( 1.0, 0.0, -1.0 ) );
      index = g.vertices.push( vec3.fromValues( -1.0, 0.0, -1.0 ) );
      index = g.vertices.push( vec3.fromValues( 0.0, 1.0, 0.0 ) );
      g.faces.push( new ENGINE.Face( index-3, index-2, index-1 ) );


      g.computeVertexNormals();

      o.geometry = g;
      o.color = vec4.fromValues( 1.0, 0.0, 0.0, 1.0 );
      
      //texture coords
      o.initTexture( "flower.jpg" );
      for ( var i = 0; i < 4; i++ ) {
        o.texture.UVs.push( vec2.fromValues(1.0, 0.0) );
        o.texture.UVs.push( vec2.fromValues(0.0, 0.0) );
        o.texture.UVs.push( vec2.fromValues(0.0, 1.0) );
      }

      scene.addObject( o );

      

      camera.position[0] = 0.0;
      camera.position[1] = 3.0;
      camera.position[2] = 9.0;
      camera.updateFromLookAt();

      

    </script>
</html>
